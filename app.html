<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lịch Công Tác BHS - Full Tuần</title>
    <style>
        :root {
            --primary-blue: #2c5282; /* Màu xanh đậm tiêu đề bảng */
            --header-text: #1a365d; /* Màu chữ tiêu đề lớn */
            --bg-active: #2b6cb0; /* Màu nút active */
            --text-red: #c53030; /* Màu giờ/thông báo đỏ */
            --border-color: #e2e8f0;
            --badge-yellow: #ecc94b;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; padding: 0; }
        body { background-color: #f7fafc; padding: 20px; }

        /* HEADER SECTION */
        .header-container { text-align: center; margin-bottom: 20px; }
        .main-title { color: var(--header-text); font-size: 24px; font-weight: 800; text-transform: uppercase; margin-bottom: 15px; }
        
        .stats-bar { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; font-size: 14px; }
        .stat-item { background: white; padding: 5px 15px; border-radius: 4px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-weight: 600; }
        .stat-item span { color: var(--text-red); }

        /* FILTER BUTTONS */
        .filter-bar { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .btn-filter {
            padding: 8px 16px; border: 1px solid var(--border-color); background: white;
            border-radius: 20px; cursor: pointer; font-size: 13px; font-weight: 600; color: #4a5568;
            transition: all 0.2s;
        }
        .btn-filter:hover { background-color: #edf2f7; }
        .btn-filter.active { background-color: var(--bg-active); color: white; border-color: var(--bg-active); }

        /* TABLE STYLING */
        .table-responsive { overflow-x: auto; background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; min-width: 1000px; }
        
        th {
            background-color: var(--primary-blue); color: white; padding: 12px;
            font-size: 12px; text-transform: uppercase; font-weight: 700; text-align: left;
            position: sticky; top: 0;
            white-space: nowrap;
        }

        td {
            padding: 12px; border-bottom: 1px solid var(--border-color); border-right: 1px solid var(--border-color);
            font-size: 13px; color: #2d3748; vertical-align: middle;
        }

        /* Column Specifics */
        .col-date { font-weight: 700; color: var(--primary-blue); text-align: center; background-color: #ebf8ff; width: 100px; }
        .col-time { color: var(--text-red); font-weight: 700; width: 90px; }
        .col-content { font-weight: 600; min-width: 150px; }
        
        /* Badges */
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; display: inline-block; }
        .badge-warning { background-color: var(--badge-yellow); color: #744210; }
        
        /* Highlight Row Logic */
        tr:hover td { background-color: #faf5ff; }
    </style>
</head>
<body>

    <div class="header-container">
        <h1 class="main-title">LỊCH CÔNG TÁC BHS TUẦN 18, NĂM 2025</h1>
        
        <div class="stats-bar">
            <div class="stat-item">Sự kiện: <span id="totalEvents">0</span></div>
            <div class="stat-item">Lịch BGH: <span id="totalBGH">0</span></div>
            <div class="stat-item">Hôm nay: <span style="color: green;">03/12</span></div>
        </div>

        <div class="filter-bar" id="filterContainer">
            </div>
    </div>

    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>Ngày / Thứ</th>
                    <th>Thời gian</th>
                    <th>Nội dung chính</th>
                    <th>Nội dung chi tiết</th>
                    <th>Chủ trì</th>
                    <th>Thành phần</th>
                    <th>Địa điểm</th>
                    <th>Ghi chú</th>
                    <th>BGH-Khối QL-VP</th>
                </tr>
            </thead>
            <tbody id="scheduleBody">
                </tbody>
        </table>
    </div>

    <script>
        // --- 1. DỮ LIỆU MẪU ĐẦY ĐỦ CẢ TUẦN ---
        // BẠN SỬA NỘI DUNG TẠI ĐÂY
        const rawScheduleData = [
            {
                date: "01/12", day: "Thứ 2",
                events: [
                    { time: "7:30 SA", content: "Chào cờ", detail: "Chào cờ đầu tuần toàn trường", host: "TPT", attendees: "Toàn trường", location: "Sân trường", note: "", dept: "TH" },
                    { time: "7:30 SA", content: "Chào cờ", detail: "Chào cờ đầu tuần", host: "TPT", attendees: "Toàn trường", location: "Sân trường", note: "", dept: "THCS" },
                    { time: "7:45 SA", content: "Trải nghiệm AI ROBOTICS", detail: "Trải nghiệm AI ROBOTICS (1/2, 1/1)", host: "GVCN", attendees: "GVCN, QS", location: "Phòng AI ROBOTICS", note: "", dept: "TH" },
                    { time: "1:35 CH", content: "Trải nghiệm AI ROBOTICS", detail: "Trải nghiệm AI ROBOTICS (1/3)", host: "GVCN", attendees: "GVCN, QS", location: "Phòng AI ROBOTICS", note: "", dept: "TH" }
                ]
            },
            {
                date: "02/12", day: "Thứ 3",
                events: [
                    { time: "7:30 SA", content: "Múa sân trường", detail: "Múa sân trường TH", host: "TPT", attendees: "Cấp Tiểu học", location: "Sân trường", note: "", dept: "TH" },
                    { time: "7:45 SA", content: "Dự giờ thăm lớp", detail: "Dự giờ thăm lớp đột xuất", host: "BGH", attendees: "BGH, TT", location: "Đột xuất", note: "", dept: "TH", isHighlight: true },
                    { time: "8:00 SA", content: "Tập huấn", detail: "Tập huấn môn Ngữ văn", host: "SGD", attendees: "Cô Hưng", location: "Trường Song Ngữ Lạc Hồng", note: "", dept: "THCS" },
                    { time: "", content: "Phụ đạo HS", detail: "Phụ đạo HS theo kế hoạch", host: "TT", attendees: "GV được phân công", location: "Lớp học", note: "", dept: "TH" }
                ]
            },
            {
                date: "03/12", day: "Thứ 4",
                events: [
                    { time: "7:30 SA", content: "Sinh hoạt chuyên môn", detail: "Họp tổ chuyên môn khối TH", host: "TTCM", attendees: "GV Tiểu học", location: "Phòng họp 1", note: "", dept: "TH" },
                    { time: "14:00 CH", content: "Hội ý BGH", detail: "Họp giao ban tuần", host: "BGH", attendees: "BGH, Trưởng bộ phận", location: "Phòng Hiệu trưởng", note: "", dept: "VP", isHighlight: true }
                ]
            },
            {
                date: "04/12", day: "Thứ 5",
                events: [
                    { time: "8:00 SA", content: "Thao giảng", detail: "Thao giảng cấp trường môn Toán", host: "BGH", attendees: "GV Toán", location: "Lớp 9A1", note: "", dept: "THCS", isHighlight: true },
                    { time: "15:00 CH", content: "CLB Tiếng Anh", detail: "Sinh hoạt CLB Speaking", host: "Tổ TA", attendees: "HS Đăng ký", location: "Hội trường", note: "", dept: "TH-THCS" }
                ]
            },
            {
                date: "05/12", day: "Thứ 6",
                events: [
                    { time: "7:30 SA", content: "Kiểm tra vệ sinh", detail: "Kiểm tra nề nếp vệ sinh lớp học", host: "TPT", attendees: "Sao đỏ", location: "Các lớp học", note: "", dept: "VP" }
                ]
            },
            {
                date: "06/12", day: "Thứ 7",
                events: [
                    { time: "8:00 SA", content: "Họp PHHS", detail: "Họp đại diện PHHS các lớp", host: "BGH", attendees: "Đại diện PHHS", location: "Hội trường A", note: "", dept: "VP", isHighlight: true }
                ]
            },
            {
                date: "07/12", day: "Chủ Nhật",
                events: [
                    { time: "", content: "Nghỉ", detail: "Nghỉ cuối tuần", host: "", attendees: "", location: "", note: "", dept: "" }
                ]
            }
        ];

        // --- 2. HÀM LOGIC XỬ LÝ ---

        function initFilters() {
            const days = ["Tất cả", "Thứ 2", "Thứ 3", "Thứ 4", "Thứ 5", "Thứ 6", "Thứ 7", "Chủ Nhật"];
            const container = document.getElementById('filterContainer');
            
            days.forEach((day, index) => {
                const btn = document.createElement('button');
                btn.className = `btn-filter ${index === 0 ? 'active' : ''}`;
                btn.innerText = day;
                btn.onclick = () => filterSchedule(day, btn);
                container.appendChild(btn);
            });
        }

        function calculateStats() {
            let totalEvents = 0;
            let totalBGH = 0;
            
            rawScheduleData.forEach(day => {
                day.events.forEach(evt => {
                    if (evt.content !== "Nghỉ") totalEvents++;
                    if (evt.host === "BGH") totalBGH++;
                });
            });

            document.getElementById('totalEvents').innerText = totalEvents;
            document.getElementById('totalBGH').innerText = totalBGH;
        }

        function renderSchedule(filterDay = "Tất cả") {
            const tbody = document.getElementById('scheduleBody');
            tbody.innerHTML = ''; 

            let hasData = false;

            rawScheduleData.forEach(dayGroup => {
                if (filterDay !== "Tất cả" && dayGroup.day !== filterDay) return;
                hasData = true;

                const rowCount = dayGroup.events.length;
                dayGroup.events.forEach((evt, index) => {
                    const tr = document.createElement('tr');

                    // Cột ngày (Rowspan)
                    if (index === 0) {
                        const tdDate = document.createElement('td');
                        tdDate.className = 'col-date';
                        tdDate.rowSpan = rowCount;
                        tdDate.innerHTML = `${dayGroup.day}<br><small>${dayGroup.date}</small>`;
                        tr.appendChild(tdDate);
                    }

                    // Xử lý Badge BGH
                    const hostDisplay = evt.host === 'BGH' || evt.isHighlight 
                        ? `<span class="badge badge-warning">${evt.host}</span>` 
                        : evt.host;

                    tr.innerHTML += `
                        <td class="col-time">${evt.time}</td>
                        <td class="col-content">${evt.content}</td>
                        <td>${evt.detail}</td>
                        <td>${hostDisplay}</td>
                        <td>${evt.attendees}</td>
                        <td>${evt.location}</td>
                        <td>${evt.note}</td>
                        <td>${evt.dept}</td>
                    `;
                    tbody.appendChild(tr);
                });
            });

            if (!hasData) {
                tbody.innerHTML = '<tr><td colspan="9" style="text-align:center; padding: 20px;">Không có dữ liệu hiển thị</td></tr>';
            }
        }

        function filterSchedule(selectedDay, btnElement) {
            document.querySelectorAll('.btn-filter').forEach(b => b.classList.remove('active'));
            btnElement.classList.add('active');
            renderSchedule(selectedDay);
        }

        // --- 3. KHỞI CHẠY ---
        document.addEventListener('DOMContentLoaded', () => {
            initFilters();
            renderSchedule();
            calculateStats(); // AI Logic: Tự động đếm số sự kiện
        });

    </script>
</body>
</html>
